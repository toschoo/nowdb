/* ========================================================================
 * (c) Tobias Schoofs, 2018
 * ========================================================================
 * Private 8 Byte LRU Cache with residents (main use case vertex pk)
 * ========================================================================
 */
#ifndef nowdb_plru8r_decl
#define nowdb_plru8r_decl

#include <nowdb/types/types.h>
#include <nowdb/types/error.h>
#include <nowdb/task/lock.h>

#include <tsalgo/lru.h>

/* ------------------------------------------------------------------------
 * Private 12Byte LRU
 * ------------------------------------------------------------------------
 */
typedef ts_algo_lru_t nowdb_plru8r_t;

/* ------------------------------------------------------------------------
 * Init LRU
 * ------------------------------------------------------------------------
 */
nowdb_err_t nowdb_plru8r_init(nowdb_plru8r_t *lru,
                              uint32_t       max);

/* ------------------------------------------------------------------------
 * Destroy LRU
 * ------------------------------------------------------------------------
 */
void nowdb_plru8r_destroy(nowdb_plru8r_t *lru);

/* ------------------------------------------------------------------------
 * Get data from LRU
 * ------------------------------------------------------------------------
 */
nowdb_err_t nowdb_plru8r_get(nowdb_plru8r_t  *lru,
                             nowdb_key_t      key,
                             char          *found);

/* ------------------------------------------------------------------------
 * Add data to LRU
 * ------------------------------------------------------------------------
 */
nowdb_err_t nowdb_plru8r_add(nowdb_plru8r_t *lru,
                             nowdb_key_t     key);

/* ------------------------------------------------------------------------
 * Add data to LRU as resident
 * ------------------------------------------------------------------------
 */
nowdb_err_t nowdb_plru8r_addResident(nowdb_plru8r_t *lru,
                                     nowdb_key_t     key);

/* ------------------------------------------------------------------------
 * Revoke residence
 * ------------------------------------------------------------------------
 */
void nowdb_plru8r_revoke(nowdb_plru8r_t *lru,
                         nowdb_key_t     key);
#endif
